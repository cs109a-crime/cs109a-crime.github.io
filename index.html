<!DOCTYPE HTML>
<html>
	<head>
		<title>CS109a Crime</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>

		<!-- Header -->
			<header id="header" class="alt">
				<div class="logo"><a href="index.html">Crime Prediction<span> CS109a: Introduction to Data Science</span></a></div>
				<a href="#menu" class="toggle"><span>Menu</span></a>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="#">Home</a></li>
					<li><a href="#introduction">Introduction and Motivation</a></li>
					<li><a href="#problem_statement">Problem Statement</a></li>
					<li><a href="#data_description">Description of Data</a></li>
					<li><a href="#modeling_approach">Modeling Approach</a></li>
					<li><a href="#results">Project Trajectory, Results, and Interpretation</a></li>
					<li><a href="#conclusion">Conclusion and Future Work</a></li>
				</ul>
			</nav>

			<section id="banner" data-video="images/banner">
				<div class="inner">
					<h1>Crime Prediction</h1>
					<p>by Nicolas Lepore, Natalie Margulies, Daphne Kaxiras, and Wes De Silvestro<br />
					Final Project Group 49. Hosted by <a href="https://github.com/nlepore33/finalproject">GitHub</a>.</p>
					<a href="#introduction" class="button special scrolly">Explore Our Project</a>
				</div>
			</section>

		<section id="introduction" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/nyc.JPG" alt="" />
						</div>
						<div class="content">
							<header class="align-left">
								<h2>Introduction and Motivation</h2>
								<hr />
								<p>After the creation of President Obama's 2015 Task Force on 21st Century Policing,
									 many police departments pushed to implement community focused policing tactics.
									 This meant creating a more comprehensive support system for the community, focusing on
									 holistic public health rather than arrests and conviction numbers. As an extension of this,
									 our team decided to look into Analyze Boston's police report dataset, which included
									 records of all police reports filed from 2015 to 2019. We wanted to analyze police
									 reports to see what sort of emergency responses correlated with different predictors.
									 For example, if we could predict 911 calls that had a high likelihood of involving domestic
									 abuse, then we could make sure to send someone with special training in that field specifically
									 to those calls. Similarly with drug related cases, or cases involving weapons, specialists who
									 had training in those areas could be more useful for the community's well being than an arrest. Through this
									 analysis, we could supplement police response by helping with effective resource allocation.
								</p>
							</header>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="problem_statement" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/boston_cityscape.jpg" alt="" />
						</div>
						<div class="content">
							<header class="align-left">
								<h2>Problem Statement</h2>
								<hr />
								<p>
									In order to gain insights about the above problems, we
									decided to focus on two specific questions which could be explored using
									data science and statistical analysis.
								</p>

								<ol style="font-size: 20px" type="1">
									<li>Given that emergency services have been contacted, and given the time,
										location, and other predictors listed below, what sort of emergency
										response will most likely be needed?</li>
									<li>Which areas or times correlate most with different types of police reports?</li>
								</ol>

								<p>
									In order to use the datasets provided to answer these questions, we categorized each crime
									based on its offence code, and grouped codes together by the type of response they would need.
									For example, we grouped drug offences together, because they could benefit from a different
									kind of specialist than cases involving domestic abuse, or from cases of public disturbance.
								</p>

							</header>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="data_description" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/pic01.jpg" alt="" />
						</div>
						<div class="content">
							<header class="align-left">
								<h2>Description of Data</h2>
							</header>
							<hr />
							<h3>Data Sources</h3>
							<p><a href="https://data.boston.gov/dataset/crime-incident-reports-august-2015-to-date-source-new-system">Crime Incident Reports</a>:
								Used as our main data source for the crime incidents.</p>
							<p><a href="https://data.boston.gov/dataset/property-assessment">Property Assessments</a>:
								Boston property values, so we can relate location of the crime to economic status of the setting
								in which it occurred.</p>
							<p><a href="https://data.boston.gov/dataset/streetlight-locations">Streetlight Locations</a>:
								Boston streetlight locations, so we can see what the closest streetlight or how many streetlights
								are around a crime.</p>
							<p><a href="https://www.ncdc.noaa.gov/cdo-web/datasets/GHCND/stations/GHCND:USW00014739/detail">Weather Data</a>:
								Daily weather data to see what the weather was when the crime was committed.</p>
							<p><a href="https://data.boston.gov/dataset/boston-police-stations">Police Stations</a>:
								Police station locations to see if a crime happened near or far away from a police station.</p>
							<p><a href="https://data.boston.gov/dataset/hospital-locations">Hospital Locations</a>:
								Hospital locations to see if a crime happened near or far away from a hospital.</p>
							<p><a href="https://data.boston.gov/dataset/public-schools">Public Schools</a>:
								Public school locations to see if a crime happened near or far away from a public school.</p>
							<hr />
							<h3>Data Cleaning</h3>
							<p> 1. Dropped Missing Data: We first dropped rows with a substantial amount of missing data, since these would not help us.</p>
							<p>
								2. Sampling: We looked for ways to create a master dataframe with which we could train and test our model.
								To do this, we had to combine many CSVs by certain indices. The data sets were very large, so we sampled
								from some of them to make certain processes faster, without giving up the integrity of the data.
							</p>
							<p>
								3. Geocoding: One issue was that the crime reports gave location in terms of longitude and latitude.
								To combine closest property value with crime, we had to use geocoding, which is the
								process of converting addresses to longitude and latitude.
							</p>
							<p>
								4. Property: Once the property addresses were converted to longitude and latitude,
								we then found the closest property value and the average neighborhood property value to a given
								crime. This was computationally difficult since we needed to test many properties for each crime
								to achieve this, but once we did it one time, we could save that CSV for future use.
							</p>
							<p>
								5. Min Distance and Density: We followed a similar technique to find how far away the closest streetlight was to the crime.
								Using the coordinates of the streetlights, we found how far away the closest streetlight was
								to a crime by converting from coordinate Euclidean distance to a familiar distance metric.
								We then found the density of streetlights in a radius of 0.01 degrees (in terms of
								degrees latitude or longitude) from the incident. We did this computation for
								streetlights, police stations, hospitals, and schools.
								Again, this was computationally taxing, but only needed to be performed once.
							</p>
							<p>
								6. Weather: We looked at weather for each day in Boston, to see if it affected type of crime.
								We took the average temperature, precipitation amount, and snow amount to see whether there
								was a relationship.
							</p>
							<p>
								7. Response: We used these features to predict the crime "category", which we defined as one of
								burglary, violent, possession of weapons, domestic, and drugs.
							</p>

							<h4>Master Dataset Columns:</h4>
							<div class="table-wrapper">
								<table>
									<thead>
									<tr>
										<th>Column</th>
										<th>Description</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>Lat</td>
										<td>latitude of crime incident</td>
									</tr>
									<tr>
										<td>Long</td>
										<td>longitude of crime incident</td>
									</tr>
									<tr>
										<td>Month</td>
										<td>month of crime incident</td>
									</tr>
									<tr>
										<td>Day_of_Week</td>
										<td>day of the week of crime incident</td>
									</tr>
									<tr>
										<td>Hour</td>
										<td>hour of the day of crime incident</td>
									</tr>
									<tr>
										<td>TAvg</td>
										<td>average temperature for the day of crime incident</td>
									</tr>
									<tr>
										<td>Prcp</td>
										<td>precipitation amount for the day of crime incident</td>
									</tr>
									<tr>
										<td>Snow</td>
										<td>snow amount for the day of crime incident</td>
									</tr>
									<tr>
										<td>Closest_property_value</td>
										<td>value of the closest property</td>
									</tr>
									<tr>
										<td>Neighborhood_avg</td>
										<td>average neighborhood property value</td>
									</tr>
									<tr>
										<td>Lamp_min_dist</td>
										<td>distance to the nearest streetlight</td>
									</tr>
									<tr>
										<td>Lamp_density</td>
										<td>density of streetlights 0.01 degrees around the crime incident</td>
									</tr>
									<tr>
										<td>Police_min_dist</td>
										<td>distance to the nearest police station</td>
									</tr>
									<tr>
										<td>Police_density</td>
										<td>density of police stations 0.01 degrees around the crime incident</td>
									</tr>
									<tr>
										<td>Hospital_min_dist</td>
										<td>distance to the nearest hospital</td>
									</tr>
									<tr>
										<td>Hospital_density</td>
										<td>density of hospitals 0.01 degrees around the crime incident</td>
									</tr>
									<tr>
										<td>School_min_dist</td>
										<td>distance to the nearest school</td>
									</tr>
									<tr>
										<td>School_density</td>
										<td>density of school 0.01 degrees around the crime incident</td>
									</tr>
									<tr>
										<td>Shooting</td>
										<td>whether the crime incident was a shooting or not</td>
									</tr>
									<tr>
										<td>Category</td>
										<td>our response variable, the category of crime (burglary, violent, possession
											weapons, domestic, and drugs.)</td>
									</tr>
									</tbody>
								</table>
								<h3>Exploratory Data Analysis (EDA)</h3>
								<p>We began our EDA by categorizing crime offense_codes into five different broad categorizations of serious crime: domestic, violent, drugs, burglary, and possession weapons. We chose these five categories for three main reasons.
								<ol type="1">
									<li>The specificity of the <i>crime_incidents</i> dataset's offense_code was hindering predictive power with over 5 categories</li>
									<li> Domestic, violent, drugs, burglary, and possession weapons are the most frequent serious crime groupings</li>
									<li>These five categories require the most specialized police task training. Specifically, Obama’s Task Force on 21st Century Policing report highlighted specific efforts to include specialization in domestic violence and drug-related law enforcement deployment.</li>
								</ol>
								<div class="image right">
									<img src="images/shootings_boston.png" alt="" />
								</div>
								<p>Our EDA analysis explores correlations between location coordinates and amenity availability and crime categories.</p>
								<p>We first constructed a map plotting locations of crime incidents in Boston, differentiating
									between the most egregious crimes (i.e., shootings) in red and all other forms of crime in
									blue. The plot shows us what we might expect: crime incident is correlated with population
									density. Thus, the more populated areas of Boston in its center sees more crime than the outskirts.
									However, this does not correspond to a specific neighborhood.
								</p>
								<div class="image left">
									<img src="images/eda_images/domestic.jpg" alt="" />
								</div>
								<div class="image left">
									<img src="images/eda_images/mv_accidents.jpg" alt="" />
								</div>
								<p>We next explored the relationship between specific crime category and latitude/longitude
									location data. <i>Public Disturbance</i> crimes are concentrated near public locations such
									as the Boston Commons and Prudential Center while <i>Domestic Crimes</i> are much more concentrated
									in downtown, urban Boston areas and <i>Motor Vehicle</i> accidents occur on exclusively on roads.</p>
								<div class="image left">
									<img src="images/eda_images/po_sch_hos.png" alt="" />
								</div>
								<p>We next explored the correlation between amenity availability (including school, hospital,
									streetlight, and police-station proximity). Streetlamp are evenly distributed across
									Boston and add little predictive power. However, density of hospitals, school, and police
									stations near a crime location appear highly correlated with crime category.</p>
								<p>The EDA process highlighted different correlations between crime categories and location
									specifics. We were able to use this analysis to inform how we approach the model-building
									process as we heavily prioritized hospital-proximity and school-proximity as important predictors.</p>

							</div>
					</div>
				</div>
			</div>
		</section>

		<section id="modeling_approach" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/pic02.jpg" alt="" />
						</div>
						<div class="content">
							<header class="align-center">
								<h2>Modeling Approach</h2>
							</header>
							<hr />
							<h2>Model Refining</h2>
							<p>
								We tried many approaches to refine our data and our model. To list a few:
							</p>
							<p>
								1. Implementing Logistic Regression, with and without cross validation. Using Logistic Regression
								offered a very small increase over the naive accuracy of just predicting the most common category.
								Even though the model is well suited to categorical data, it was not well suited to reconcile
								the many features we included, even after being trained for 5 cross validations.
							</p>
							<p>
								2. Implementing a Decision Tree. Again, even though this model is well suited for categorical
								data, it didn't provide a substantial boost over the naive. This led us to look into
								enhanced decision tree techniques, such as bagging, boosting, and random forest.
							</p>
							<p>
								3. Implementing a Neural Network. Using 3 dense hidden layers of 100 nodes each, we were
								able to get roughly 70% validation accuracy (which can be found in our notebooks).
								But as our TF warned, this method is not well suited to the problem: between running the network,
								accuracies would change dramatically.
							</p>
							<p>
								4. Using latitude and longitude for K-Means Clustering to create pseudo neighborhoods, to
								see if proximity affected the crime.
							</p>
							<p>
								5. Using latitude and longitude to find actual Boston neighborhoods, to
								see if neighborhood affected the crime.
							</p>
							<p>
								6. Attempted to use PCA decomposition, but realized the problem did not need dimension reduction.
							</p>
							<p>
								7. Testing for different maximum depths of a Random Forest.
							</p>
							<hr />
							<h2>Final Model</h2>
							<p>
								<b>A Note About the Baseline Model</b>: to have something to compare to, we looked at what
								sort of accuracy we would want our model to beat. One way to think of it is the accuracy
								we would get if responders guessed categories at random (this would be the accuracy given
								no information about the past). Another way to think about it is the accuracy that a model
								would produce if it just guessed the most common category 100% of the time (a very naive model).
								We included both, and decided to compare our model to the latter, because it is more realistic
								that we do have information about the past when making these decisions.
							</p>
							<p>
								Our naive baseline accuracy was 20% and our model baseline accuracy was roughly 35.9%.
							</p>
							<div class="image left">
								<img src="images/rfcv.png" alt="" />
							</div>
							<p>
								<b>Set Up the Model</b>: using the knowledge we gained from refining different models, all of which
								can be found in the folder old_models. From this refining, we decided that the best model
								would be a Random Forest with a maximum tree depth of 10 (so as to get the best test accuracy
								without overfitting too much to the training set). We tested each of the hyper parameters
								that RandomForestClassifier takes, but none helped us improve our accuracy.
							</p>
							<p>
								<b>Train and Evaluate</b>: the model using the train and test sets. We chose to evaluate our model
								based on accuracy because other methods didn't make sense. For example, we do care a lot
								about the false negatives, since not all our categories have the same number of entries,
								however, since this is not a binary outcome problem, it didn't make sense to use ROC scores.
								After careful inspection of the class predictions and the predict_proba results, we decided
								that the accuracy was a good measure of how well our model was performing.
							</p>
							<p>Random Forest Accuracy, Training Set : 50.92%</p>
							<p>Random Forest Accuracy, Testing Set :  46.11%</p>
							<p>
								<b>Analysis</b>: as we can see above, our trained model (~50%) performed better than the
								baseline model (35%). Although the model itself seems simple (we just trained a simple
								random forest on our training data), it is in fact the result of many careful decisions.
								The real model refining happened in the feature engineering and feature selection process.

								<br>

								Due to the nature of the data (crimes are hard to predict, it can hard to differentiate
								between a crime that involves drugs or not, and the predictors that we chose cannot possibly
								capture all the variability in the data), we are confident that our model's accuracy could
								not significantly improve without drastic changes in the data inputs.

								<br>

								That being said, we wanted to create something that could be useful for a real-life situation,
								i.e. how can we use the model we created to help emergency responders? The accuracy is pretty low,
								meaning that given an emergency, the model would only be right about what sort of response was
								needed 50% of the time. So we decided to use our model to help narrow down the types of responses
								that could be needed to 2 instead of 5. We could use our model to tell responders "this emergency
								likely involves drugs and weapons possessions", or "this emergency likely involves domestic issues and drugs".
								This could help responders send different specialists to each situation, making their response more effective.

								<br>

								In order to accomplish this, we used predict_proba and chose the top two predicted classes
								for each crime. We used the model trained on the training set, and tested it on the test
								set to see how good of an accuracy we could get. We were hoping for an accuracy above 75%
								for a reliable and applicable tool.
							</p>
							<p>
								Percent of guesses that contained correct category: 74.2 %
							</p>
							<p>
								<b>Features</b>: As a final useful piece of information, we looked at the most important predictors that
								help us determine crime type. This could be useful for emergency officials to know for
								preventative measures. As it turns out, the single most influential feature was the minimum
								distance to a police station, which is useful to know if considering where to place a new police station.
							</p>
							<p>
								Most important feature: 'police_min_dist'
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="results" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/boston_back.JPG" alt="" />
						</div>
						<div class="content">
							<header class="align-center">
								<h2>Project Trajectory, Results, and Interpretation</h2>
							</header>
							<hr />
							<h3>Project Trajectory</h3>
							<p>
								Our project changed dramatically as we decided what we wanted to focus in on.
							</p>
							<p>
								First, we wanted to predict whether a certain crime was a shooting or not (0 or 1). After
								trying a few models, we soon realized that the number of shootings is too low to accurately
								predict; our model was simply predicting no shooting for every input, and this gave us high
								accuracy, but no advantage over the naive model of always predicting the most common outcome,
								which was no shooting.
							</p>
							<p>
								Next, we wanted to predict UCR, the severity of the crime as dictated by the UCR system.
								This was difficult for a reason similar to the shooting: Part 3 was the most common UCR,
								so our models were always predicting that. In addition, locational data did not give us that
								much of an advantage in predicting UCR, since it was distributed somewhat evenly across
								all the neighborhoods of Boston. The naive model wasn't much worse than the models we could come up with.
								Also, this was not as useful for our research question, since predicting the UCR did not give
								much info into the kind of crime being committed, only the severity of said crime.
							</p>
							<p>
								We then decided that we could predict crime category. Originally we were trying to predict 11
								categories of crime, and were making improvements over the naive model. However, our research question
								made us decide to cut this down to 5 (burglary, violent, possession of weapons, domestic, and drugs),
								since these could require specialized police units to deal with, and they were the more egregious crimes.
							</p>
							<p>
								Throughout all of this experimentation, we documented our model attempts, new EDA, and other
								tinkering. These can all be found in our project.
							</p>
							<h3>Results and Interpretation</h3>
							<p>
								From the results shown above in the final model, we see that we can provide a sizable increase
								over the naive accuracy. If we can predict the top two possibilities of crime with this high
								of an accuracy, this means we can respond to a crime with the right teams for the job. If
								police know what kind of crime they are about to see, they can better prepare for it. A violent crime
								should have a different response than a drug related crime.
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="conclusion" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/pic03.jpg" alt="" />
						</div>
						<div class="content">
							<header class="align-center">
								<h2>Conclusions and Future Work</h2>
								<p>Wrap up our findings.</p>
							</header>
							<hr />
							<p>
								After a few weeks of attempting to predict crime type, we found that it is much more difficult
								than we anticipated. Crime is a very random event, and where and when it happens can be anywhere
								and anytime.
							</p>
							<p>
								That being said, we did find some interesting ways to predict the type of crime given some
								preliminary info, and this could be helpful for police responding quickly and effectively.
								If we can send specialized law enforcement equipped to handle the top two possibilities
								as far as type of crime, we can better respond to the situation, possibly saving lives.
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Four -->
			<section id="bottom" class="wrapper style3">
				<div class="inner">

					<header class="align-center">
						<h2>CS109A Final Project</h2>
						<p style="color: white">by Nicolas Lepore, Natalie Margulies, Daphne Kaxiras, and Wes De Silvestro
						</p>
					</header>

				</div>
			</section>

		<!-- Footer -->
			<footer id="footer" class="wrapper">
				<div class="inner">
					<div class="copyright">
						&copy; Design from: <a href="https://templated.co/">TEMPLATED</a>. Images <a href="https://unsplash.com/">Unsplash</a>. Video <a href="http://coverr.co/">Coverr</a>.
					</div>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
