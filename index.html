<!DOCTYPE HTML>
<html>
	<head>
		<title>CS109a Crime</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>

		<!-- Header -->
			<header id="header" class="alt">
				<div class="logo"><a href="index.html">Crime Prediction<span> CS109a: Introduction to Data Science</span></a></div>
				<a href="#menu" class="toggle"><span>Menu</span></a>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="#">Home</a></li>
					<li><a href="#introduction">Introduction</a></li>
					<li><a href="#research_question">Research Question</a></li>
					<li><a href="#data_collection">Data Collection</a></li>
					<li><a href="#data_cleaning">Data Cleaning</a></li>
					<li><a href="#eda">Exploratory Data Analysis</a></li>
					<li><a href="#model_refining">Model Refining</a></li>
					<li><a href="#final_model">Final Model</a></li>
					<li><a href="#results">Results</a></li>
				</ul>
			</nav>

			<section id="banner" data-video="images/banner">
				<div class="inner">
					<h1>Crime Prediction</h1>
					<p>by Nicolas Lepore, Natalie Margulies, Daphne Kaxiras, and Wes De Silvestro<br />
					Hosted by <a href="https://github.com/nlepore33/finalproject">GitHub</a>.</p>
					<a href="#question" class="button special scrolly">Explore Our Project</a>
				</div>
			</section>

		<section id="introduction" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<!--						<div class="image fit">-->
						<!--							<img src="images/pic01.jpg" alt="" />-->
						<!--						</div>-->
						<div class="content">
							<header class="align-left">
								<h2>INTRODUCTION</h2>
								<p>After the creation of President Obama's 2015 Task Force on 21st Century Policing,
									many police departments pushed to implement community focused policing tactics.
									This meant creating a more comprehensive support system for the community, focusing on
									wholistic public health rather than arrests and convicion numbers. As an extension of this,
									our team decided to look into Boston Analytic's police report dataset, which included
									records of all police reports filed from 2015 to 2019. We wanted to analyze police
									reports to see what sort of emergency responses correlated with different predictors.
									For example, if we could predict 911 calls that had a high likelihood of involving domestic
									abuse, then we could make sure to send someone with special training in that field specifically
									to those calls. Similarly with drug related cases, or cases involving weapons, specialists who
									had training in those areas could be more useful for the community's wellbeing than an arrest. Through this
									analysis, we could supplement police response by helping with effective resource allocation.</p>
							</header>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="research_question" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<!--						<div class="image fit">-->
						<!--							<img src="images/pic01.jpg" alt="" />-->
						<!--						</div>-->
						<div class="content">
							<header class="align-left">
								<h2>RESEARCH QUESTION</h2>
								<p>
									In order to gain insights about the above problems, we
									decided to focus on two specific questions which could be explored using
									data science and statistical analysis.
								</p>

								<ol type="1">
									<li>Given that emergency services have been contacted, and given the time,
										location, and other predictors listed below, what sort of emergency
										response will most likely be needed?</li>
									<li>Which areas or times correlate most with different types of police reports?</li>
								</ol>

								<p>
									In order to use the datasets provided to answer these questions, we categorized each crime
									based on its offence code, and grouped codes together by the type of response they would need.
									For example, we grouped drug offences together, because they could benefit from a different
									kind of specialist than cases involving domestic abuse, or from cases of public disturbance.
								</p>

							</header>
						</div>
					</div>
				</div>
			</div>
		</section>


		<!-- One -->
		<section id="data_collection" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<div class="image fit">
							<img src="images/pic01.jpg" alt="" />
						</div>
						<div class="content">
							<header class="align-center">
								<h2>Data Collection</h2>
								<p>To better predict crime types, we looked for additional data that
									 would help our model differentiate between categories.</p>
							</header>
							<hr />
							<p><a href="https://data.boston.gov/dataset/crime-incident-reports-august-2015-to-date-source-new-system">Crime Incident Reports</a>:
								Used as our main data source for the crime incidents.

								<blockquote>Crime incident reports are provided by Boston Police Department (BPD) to document the
								initial details surrounding an incident to which BPD officers respond. This is a
								dataset containing records from the new crime incident report system, which includes
								a reduced set of fields focused on capturing the type of incident as well as when and
							where it occurred. Records in the new system begin in June of 2015.</blockquote></p>

							<p><a href="https://data.boston.gov/dataset/property-assessment">Property Assessments</a>:
								Gives us property values, so we can relate location of the crime to economic status of the setting
								in which it occurred.

								<blockquote>Gives property, or parcel, ownership together with value information, which ensures fair
								assessment of Boston taxable and non-taxable property of all types and classifications.
								To preserve their integrity, the identifiers PID, CM_ID, GIS_ID, ZIPCODE, and MAIL_ZIPCODE
							all are marked with an underscore ("_") as the last character.</blockquote> </p>

							<p><a href="https://data.boston.gov/dataset/streetlight-locations">Streetlight Locations</a>:
								Gives us all Boston streetlight locations, so we can see what the closest streetlight or how many streetlights
								are around a crime.

							<blockquote>The Street Lighting Division of Public Works maintains 40,000 out of the City's 67,000
								electronic streetlights, and oversees the contracting for the rest. It also takes care of
								2,800 gas lights and 1,500 fire-alarm lights. This is a legacy dataset containing latitude
							and longitude data for over 74,000 City streetlights.</blockquote> </p>

							<p><a href="https://www.ncdc.noaa.gov/cdo-web/datasets/GHCND/stations/GHCND:USW00014739/detail">Weather Data</a>:
								Daily weather data to see what the weather was when the crime was committed.

							<blockquote>Weather data for Boston over the last few years, with features such as average temperature,
							precipitation amount, snow amount, and others.</blockquote></p>

                            <p><a href="https://data.boston.gov/dataset/boston-police-stations">Police Stations</a>:
								Police station locations to see if a crime happened near or far away from a police station.

							<blockquote>City of Boston police stations. Point created from centroid of Police Department Station
							Polygons.</blockquote></p>

                            <p><a href="https://data.boston.gov/dataset/hospital-locations">Hospital Locations</a>:
								Hospital locations to see if a crime happened near or far away from a hospital.

							<blockquote>This is a legacy dataset containing the name, address, neighborhood, and coordinates of
							hospital locations throughout the City.</blockquote></p>

                            <p><a href="https://data.boston.gov/dataset/public-schools">Public Schools</a>:
								Public school locations to see if a crime happened near or far away from a public school.

							<blockquote>Boston Public Schools (BPS) schools for the school year 2018-2019.</blockquote></p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- One -->
			<section id="data_cleaning" class="wrapper style2">
				<div class="inner">
					<div>
						<div class="box">
<!--							<div class="image fit">-->
<!--								<img src="images/pic01.jpg" alt="" />-->
<!--							</div>-->
							<div class="content">
								<header class="align-center">
									<h2>Data Cleaning</h2>
									<p>Given the vast amount of data we had collected, we decided to keep only what would be useful for answering our questions.</p>
								</header>
								<hr />
								<p> 1. Dropped Missing Data: We first dropped rows with a substantial amount of missing data, since these would not help us.</p>
								<p>
									2. Sampling: We looked for ways to create a master dataframe with which we could train and test our model.
									To do this, we had to combine many CSVs by certain indices. The data sets were very large, so we sampled
									from some of them to make certain processes faster, without giving up the integrity of the data.
								</p>
								<p>
									3. Geocoding: One issue was that the crime reports gave location in terms of longitude and latitude.
									To combine closest property value with crime, we had to use geocoding, which is the
									process of converting addresses to longitude and latitude.
								</p>
								<p>
									4. Property: Once the property addresses were converted to longitude and latitude,
									we then found the closest property value and the average neighborhood property value to a given
									crime. This was computationally difficult since we needed to test many properties for each crime
									to achieve this, but once we did it one time, we could save that CSV for future use.
								</p>
								<p>
									5. Min Distance and Density: We followed a similar technique to find how far away the closest streetlight was to the crime.
									Using the coordinates of the streetlights, we found how far away the closest streetlight was
									to a crime by converting from coordinate Euclidean distance to a familiar distance metric.
									We then found the density of streetlights in a radius of 0.01 degrees (in terms of
									degrees latitude or longitude) from the incident. We did this computation for
									streetlights, police stations, hospitals, and schools.
									Again, this was computationally taxing, but only needed to be performed once.
								</p>
								<p>
									6. Weather: We looked at weather for each day in Boston, to see if it affected type of crime.
									We took the average temperature, precipitation amount, and snow amount to see whether there
									was a relationship.
								</p>
								<p>
									7. Response: We used these features to predict the crime "category", which we defined as one of
									theft, vandalism, mv accident, violent, burglary, possession weapons,
									domestic, petty theft, medical, drugs, and civil disruption.
								</p>

								<h4>Master Dataset Columns:</h4>
								<div class="table-wrapper">
									<table>
										<thead>
										<tr>
											<th>Column</th>
											<th>Description</th>
										</tr>
										</thead>
										<tbody>
										<tr>
											<td>Lat</td>
											<td>latitude of crime incident</td>
										</tr>
										<tr>
											<td>Long</td>
											<td>longitude of crime incident</td>
										</tr>
										<tr>
											<td>Month</td>
											<td>month of crime incident</td>
										</tr>
										<tr>
											<td>Day_of_Week</td>
											<td>day of the week of crime incident</td>
										</tr>
										<tr>
											<td>Hour</td>
											<td>hour of the day of crime incident</td>
										</tr>
										<tr>
											<td>TAvg</td>
											<td>average temperature for the day of crime incident</td>
										</tr>
										<tr>
											<td>Prcp</td>
											<td>precipitation amount for the day of crime incident</td>
										</tr>
										<tr>
											<td>Snow</td>
											<td>snow amount for the day of crime incident</td>
										</tr>
										<tr>
											<td>Closest_property_value</td>
											<td>value of the closest property</td>
										</tr>
										<tr>
											<td>Neighborhood_avg</td>
											<td>average neighborhood property value</td>
										</tr>
										<tr>
											<td>Lamp_min_dist</td>
											<td>distance to the nearest streetlight</td>
										</tr>
										<tr>
											<td>Lamp_density</td>
											<td>density of streetlights 0.01 degrees around the crime incident</td>
										</tr>
										<tr>
											<td>Police_min_dist</td>
											<td>distance to the nearest police station</td>
										</tr>
										<tr>
											<td>Police_density</td>
											<td>density of police stations 0.01 degrees around the crime incident</td>
										</tr>
										<tr>
											<td>Hospital_min_dist</td>
											<td>distance to the nearest hospital</td>
										</tr>
										<tr>
											<td>Hospital_density</td>
											<td>density of hospitals 0.01 degrees around the crime incident</td>
										</tr>
										<tr>
											<td>School_min_dist</td>
											<td>distance to the nearest school</td>
										</tr>
										<tr>
											<td>School_density</td>
											<td>density of school 0.01 degrees around the crime incident</td>
										</tr>
										<tr>
											<td>Shooting</td>
											<td>whether the crime incident was a shooting or not</td>
										</tr>
										<tr>
											<td>Category</td>
											<td>our response variable, the category of crime (theft, vandalism, mv accident,
												violent, burglary, possession weapons, domestic, petty theft, medical, drugs, and civil disruption)</td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

		<section id="eda" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
<!--						<div class="image fit">-->
<!--							<img src="images/pic01.jpg" alt="" />-->
<!--						</div>-->
						<div class="content">
							<header class="align-center">
								<h2>Exploratory Data Analysis (EDA)</h2>
								<p>Before modeling, we needed to understand the datasets we were working with, using statistics and graphing.</p>
							</header>
							<hr />
							<div class="image left">
								<img src="images/streetlamps_boston.png" alt="" />
							</div>

							<p>As previously mentioned, we're concerned with two types of data to better understand and predict crime: 1) location data and 2) economic data. We began our analysis by looking at location data to better understand the relationship between crime and its location in Boston.</p>
							<p>We plotted the location of all street lamps in Boston which can be seen in the image to the left. We were interested in seeing if there were any anomalies, such as areas that might have data missing about nearby street lamps. Comparing this image to other maps of Boston that we have seen before, the dataset appears to be comprehensive and the street lamps distributed as we might expect. </p>
							<p> The street lamps are clearly placed in a grid-like pattern throughout Boston which makes sense given the way urban planners typically construct neighborhoods. We see very few street lights in the top right of the map. This makes sense as this is not residential land but is part of the Boston Logan Airport. We'll want to be careful when analyzing crime in this area as the lack of street lamps might throw off the association we're investigating.</p>
							<div class="image left">
								<img src="images/shootings_boston.png" alt="" />
							</div>
							<p>Next, we wanted to continue to investigate location data, but specifically through the lens of where crimes are happening in the city. We constructed another map of one of our datasets, this time plotting incidents of crime in Boston. We chose to color code the map to differentiate between the most egregious crimes (i.e., shootings) and all other forms of crime. We've colored non-shootings in blue and shootings in red. We intentionally chose this binary distinction because shootings were the most commonly reported crime in the news, and thus the most interesting/relevant to map.</p>
							<p>The plot shows us what we might expect: incidents of crime are correlated with population density. Thus, the more populated areas of Boston in its center sees more crime than the outskirts. The shootings appear to be distributed almost entirely in downtown, urban areas of Boston. We also see that there are pockets of areas in the city that experience no crime whatsoever. We investigated each of these to ensure this was not a problem with our plot or the dataset itself. We found that many of these areas are industrial centers or non-residential areas, such as factories or the Boston Logan airport. Thus, it's plausible no crimes took place here or at least they were perhaps reported offsite once not on these premises.</p>
							<div class="image left">
								<img src="images/commoncrime.png" alt="" />
							</div>
							<p>Our crime incidents dataset features markers for the different types of crime that ocurred. We constructed a bar plot of these categories to the left so we could better understand the types of crime that occur in Boston and the data we have available to work with.</p>
							<p>As we might expect, the most common type of crime is one that is not a crime at all: police responding to sick/injured individuals after a 911 call is placed. We were surprised to find that arrests of suspects and property damage caused by motor vehicles where the driver left the scene are the next two most common forms of crime. Overall, the majority of crimes are non-violent, such as theft and larceny.</p>
							<p>The histogram shows that there are quite a few incidents of vandalism that occurred in the City. We're interested in investigating the relationship between vandalism and the presence of street lights, so we having a large sample of these crimes to model off of is very helpful.</p>
							<div class="image left">
								<img src="images/propval.png" alt="" />
							</div>
							<p>We performed a variety of other EDA tasks, but the last one we want to share is regarding property values, the second type of data we explored in our analysis. We created a histogram (seen on the left) of property values in Boston to better understand the distribution of property values throughout the city.</p>
							<p>We find that property values are not distributed normally in Boston. The distribution is right-skewed with many extremely expensive properties pulling the average up, well beyond the mean. The plot also appears to be somewhat bimodal, with a second peak at the lower end of the distribution where a number of lower value properties are recorded. The range overall is quite remarkable: some properties are worth as much as $2 billion. The majority of the values are under $2 million though, which is in line with what we'd expect.</p>
							<p>Overall, the EDA process was extremely helpful for us in better understanding our data and its limitations. We were able to use this analysis to inform how we approach the model-building process and could then better understand where our models might fail.</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="model_refining" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<!--						<div class="image fit">-->
						<!--							<img src="images/pic01.jpg" alt="" />-->
						<!--						</div>-->
						<div class="content">
							<header class="align-center">
								<h2>Model Refining</h2>
								<p>Measures we took to refine our model.</p>
							</header>
							<p>
								We tried many approaches to refine our data and our model. To list a few:
							</p>
							<p>
								1. Implementing Logistic Regression, with and without cross validation. Using Logistic Regression
								offered a very small increase over the naive accuracy of just predicting the most common category.
								Even though the model is well suited to categorical data, it was not well suited to reconcile
								the many features we included, even after being trained for 5 cross validations.
							</p>
							<p>
								2. Implementing a Decision Tree. Again, even though this model is well suited for categorical
								data, it didn't provide a substantial boost over the naive. This led us to look into
								enhanced decision tree techniques, such as bagging, boosting, and random forest.
							</p>
							<p>
								3. Implementing a Neural Network. Using 3 dense hidden layers of 100 nodes each, we were
								able to get roughly 70% validation accuracy (which can be found in our notebooks).
								But as our TF warned, this method is not well suited to the problem: between running the network,
								accuracies would change dramatically.
							</p>
							<p>
								4. Using latitude and longitude for K-Means Clustering to create pseudo neighborhoods, to
								see if proximity affected the crime.
							</p>
							<p>
								5. Using latitude and longitude to find actual Boston neighborhoods, to
								see if neighborhood affected the crime.
							</p>
							<p>
								6. Attempted to use PCA decomposition, but realized the problem did not need dimension reduction.
							</p>
							<p>
								7. Testing for different maximum depths of a Random Forest.
							</p>
							<p>
								TODO
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="final_model" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<!--						<div class="image fit">-->
						<!--							<img src="images/pic01.jpg" alt="" />-->
						<!--						</div>-->
						<div class="content">
							<header class="align-center">
								<h2>Final Model</h2>
								<p>Our model after all modifications.</p>
							</header>
							<hr />
							<p>
								We decided to use a Random Forest.
							</p>
							<p>
								Our naive accuracy by just predicting the most common category, theft, is about 17%.
							</p>
							<p>
								After augmenting our training data with all of our added features, and using a Random Forest
								of optimal depth 15, we can bring this up to roughly 28% accuracy. Important features
								include police_min_dist, Lat and Long, school_min_dist, hospital_min_dist, and hour.
							</p>
							<div class="image center">
								<img src="images/rfcv.png" alt="" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="results" class="wrapper style2">
			<div class="inner">
				<div>
					<div class="box">
						<!--						<div class="image fit">-->
						<!--							<img src="images/pic01.jpg" alt="" />-->
						<!--						</div>-->
						<div class="content">
							<header class="align-center">
								<h2>Results</h2>
								<p>How our model performed.</p>
							</header>
							<hr />
							<p>TODO</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Four -->
			<section id="bottom" class="wrapper style3">
				<div class="inner">

					<header class="align-center">
						<h2>CS109A Final Project</h2>
						<p>by Nicolas Lepore, Natalie Margulies, Daphne Kaxiras, and Wes De Silvestro
						</p>
					</header>

				</div>
			</section>

		<!-- Footer -->
			<footer id="footer" class="wrapper">
				<div class="inner">
					<div class="copyright">
						&copy; Design from: <a href="https://templated.co/">TEMPLATED</a>. Images <a href="https://unsplash.com/">Unsplash</a>. Video <a href="http://coverr.co/">Coverr</a>.
					</div>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
